syntax = "proto3";
package spellfire;

import "types.proto";

option go_package = "github.com/Icemaster-Eric/Spellfire/backend/internal/proto;pb";

enum EntityType {
  ENTITY_TYPE_UNSPECIFIED = 0;
  PLAYER = 1;
}

enum ColliderType {
    COLLIDER_TYPE_UNSPECIFIED = 0;
    COLLIDER_TYPE_CIRCLE = 1;
    COLLIDER_TYPE_RECT = 2;
}
message Collider {
    ColliderType type = 1;
    double rotation = 2;
    double width = 3;
    double height = 4;
    double radius = 5;
    Vec2 position = 6;
    Vec2 velocity = 7;
}

enum Sprite {
    SPRITE_NONE = 0;
    SPRITE_PLAYER = 1;
    SPRITE_BUSH = 2;
    SPRITE_TREE = 3;
    SPRITE_ROCK = 4;
}
message RenderData {
    Sprite sprite = 1;
}
enum PlayerMode {
    PLAYER_MODE_DEFAULT = 0;
    PLAYER_MODE_PLAYER_WIELDING_PRIMARY_GUN = 1;
    PLAYER_MODE_PLAYER_WIELDING_TACTICAL_ITEM_1 = 2;
    PLAYER_MODE_PLAYER_WIELDING_TACTICAL_ITEM_2 = 3;
    PLAYER_MODE_PLAYER_WIELDING_TACTICAL_ITEM_3 = 4;
    PLAYER_MODE_PLAYER_RELOADING = 5;
}
enum Gun {
    GUN_UNSPECIFIED = 0;
    GUN_AK47 = 1;
    GUN_M4 = 2;
}
message PlayerState {
    Gun player_gun = 1; 
    PlayerMode mode = 2;
}

message EntityState {
    PlayerState player_state = 1;
}

message Entity {
  uint32 id = 1;
  EntityType type = 2;
  Collider collider = 3;
  RenderData render_data = 4;
  EntityState state = 5;
}

enum ServerEventType {
  SERVER_EVENT_TYPE_UNSPECIFIED = 0;
}

message ServerEvent {
  ServerEventType type = 1;
}

message ServerPacket {
  Timestamp timestamp = 1;
  repeated Entity entities = 2;
  repeated ServerEvent events = 3;
}